let warningSent = false

const wrapWithHiddenComName = async portsPromise => {
  const ports = await portsPromise
  return ports.map(port => {
    const newPort = { ...port }
    return Object.defineProperties(newPort, {
      comName: {
        get() {
          if (!warningSent) {
            warningSent = true
            console.warn()
            }
          return newPort.path
        },
        enumerable: false,
      },
    })
  })
}

module.exports = {
  wrapWithHiddenComName,
}
